<project name="maptool" default="dist">
	<target name="init">
		<property file="conf/build.properties" />
		
		<property name="src"   location="src" />
		<property name="build" location="build" />
		<property name="dist"  location="dist" />
	</target>
		
	<target name="compile" depends="init">
		<mkdir dir="${build}" />

		<javac srcdir="${src}"
		       destdir="${build}"
			   target="1.5"
			   source="1.5">
			<classpath>
				<pathelement location="lib/clientserver-1.0.2.jar" />
				<pathelement location="lib/withay-util.jar" />
				<pathelement location="lib/looks-1.3b1.jar" />
				<pathelement location="lib/hessian-2.1.12.jar" />
			</classpath>
		</javac>
	</target>
	
	<target name="deploy-lib" depends="init">
	</target>
	
	<target name="dist" depends="init,compile,deploy-lib">
		<mkdir dir="${dist}" />
		<mkdir dir="${dist}/lib" />
		
		<buildnumber file="conf/build.number" />
		
		<jar destfile="${dist}/maptool-${build.version}.b${build.number}.jar" 
             manifest="conf/manifest.mf"
			 basedir="${build}" />
		
		<copy todir="${dist}/lib">
			<fileset dir="lib" />
		</copy>
	</target>
</project>